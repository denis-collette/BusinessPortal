<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:BusinessPortal.ViewModels"
             x:Class="BusinessPortal.Views.PortalPage"
             Title="{Binding Title}"
             x:DataType="viewModels:PortalViewModel">

    <ScrollView>
        <VerticalStackLayout
            Spacing="25"
            Padding="30,0"
            VerticalOptions="Center">

            <Label 
                Text="Welcome to the Business Portal!"
                SemanticProperties.HeadingLevel="Level1"
                FontSize="32"
                HorizontalOptions="Center" />

            <!-- This section now correctly binds to the CurrentUser property in the ViewModel -->
            <VerticalStackLayout Spacing="10">
                <Label Text="Current User Information:" FontSize="18" FontAttributes="Bold" />
                <Label>
                    <Label.FormattedText>
                        <FormattedString>
                            <Span Text="Name: " FontAttributes="Bold" />
                            <Span Text="{Binding CurrentUser.Name}" />
                        </FormattedString>
                    </Label.FormattedText>
                </Label>
                <Label>
                    <Label.FormattedText>
                        <FormattedString>
                            <Span Text="Email: " FontAttributes="Bold" />
                            <Span Text="{Binding CurrentUser.Email}" />
                        </FormattedString>
                    </Label.FormattedText>
                </Label>
                <Label>
                    <Label.FormattedText>
                        <FormattedString>
                            <Span Text="Roles: " FontAttributes="Bold" />
                            <Span Text="{Binding CurrentUser.Roles[0]}" />
                        </FormattedString>
                    </Label.FormattedText>
                </Label>
            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>

